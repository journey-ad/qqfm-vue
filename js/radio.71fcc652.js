(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["radio"],{"0afd":function(t,e,i){"use strict";var s=i("bc46"),a=i.n(s);a.a},1149:function(t,e,i){"use strict";var s=i("86f7"),a=i.n(s);a.a},1773:function(t,e,i){"use strict";var s=i("b1a9"),a=i.n(s);a.a},"2d08":function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return o});i("7f7f");function s(t,e){t.classList.add(e)}var a=document.createElement("div").style,n=function(){var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==a[t[e]])return e;return!1}();function o(t){return!1!==n&&("standard"===n?t:n+t.charAt(0).toUpperCase()+t.substr(1))}},"2e08":function(t,e,i){var s=i("9def"),a=i("9744"),n=i("be13");t.exports=function(t,e,i,o){var r=String(n(t)),c=r.length,l=void 0===i?" ":String(i),u=s(e);if(u<=c||""==l)return r;var h=u-c,d=a.call(l,Math.ceil(h/l.length));return d.length>h&&(d=d.slice(0,h)),o?d+r:r+d}},"3ea7":function(t,e,i){},"86f7":function(t,e,i){},"8c8e":function(t,e,i){},9617:function(t,e,i){},9744:function(t,e,i){"use strict";var s=i("4588"),a=i("be13");t.exports=function(t){var e=String(a(this)),i="",n=s(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i}},b1a9:function(t,e,i){},b3ad:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"radio"},[s("div",{staticClass:"player-wrap"},[s("div",{staticClass:"header"},[s("div",{staticClass:"iconfont icon-arrow",on:{click:function(e){return t.$router.back()}}}),s("div",{staticClass:"meta"},[s("div",{staticClass:"title"},[t._v(t._s(t.player.show.title))]),s("div",{staticClass:"album"},[t._v(t._s(t.player.show.album))])]),s("i",{staticClass:"iconfont icon-device menu"})]),s("div",{staticClass:"player"},[s("div",{staticClass:"cover"},[s("img",{attrs:{src:t.player.show.cover?t.player.show.cover:i("1579"),alt:t.player.show.title}}),s("div",{staticClass:"mask"}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.volume.show,expression:"volume.show"}],ref:"volumeBar",staticClass:"volume-bar"},[s("div",{ref:"volumeLine",staticClass:"line"},[s("div",{ref:"volumePoint",staticClass:"point",attrs:{"data-value":t.volume.value},on:{touchstart:function(e){return e.preventDefault(),t.volumeTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.volumeTouchMove(e)},touchend:t.volumeTouchEnd}})])]),s("i",{staticClass:"btn iconfont",class:t.soundBtnClass,on:{click:t.toggleVolumeBar}})]),s("div",{staticClass:"pannel"},[s("progress-bar",{attrs:{progress:t.progress,currentTime:t.currentTime,durationTime:t.durationTime},on:{percentChanging:t.onProgressBarChanging,percentChange:t.onProgressBarChange}}),s("div",{staticClass:"eq"},[s("div",{staticClass:"btn quality"},[t._v("标准")]),s("div",{staticClass:"btn speed",on:{click:t.showlaybackRate}},[t._v("语速")])]),s("div",{staticClass:"control"},[s("div",{staticClass:"iconfont btn icon-backward",on:{click:t.backward}}),s("div",{staticClass:"iconfont btn icon-prev",on:{click:t.prev}}),s("div",{class:t.playBtnClass,on:{click:t.toggle}}),s("div",{staticClass:"iconfont btn icon-next",on:{click:t.next}}),s("div",{staticClass:"iconfont btn icon-forward",on:{click:t.forward}})])],1)]),s("div",{staticClass:"footer"},[s("i",{staticClass:"iconfont icon-fav"}),s("i",{staticClass:"iconfont icon-download"}),s("i",{staticClass:"iconfont icon-alarm",class:{active:-1!==t.timer.activeIndex},on:{click:t.showTimer}}),s("i",{staticClass:"iconfont icon-playlist",on:{click:t.showPlaylist}})])]),s("playlist",{class:{active:t.isPlaylistShow}}),s("playback-rate",{attrs:{isplaybackRateShow:t.isplaybackRateShow},on:{hidePlaybackRate:t.hidePlaybackRate}}),s("van-actionsheet",{staticClass:"timer",attrs:{"cancel-text":"取消",title:"计时器"},on:{cancle:t.hideTimer},model:{value:t.timer.show,callback:function(e){t.$set(t.timer,"show",e)},expression:"timer.show"}},[-1!==t.timer.activeIndex?s("div",{staticClass:"van-actionsheet__item",attrs:{"data-time":"0"},on:{click:function(e){return e.stopPropagation(),t.onSelect(e,-1)}}},[t._v("\n      取消定时器\n      "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.timer.remaining>0,expression:"timer.remaining>0"}],staticClass:"remaining"},[t._v("("+t._s(t.formatTime(t.timer.remaining))+")")])]):t._e(),t._l(t.timer.actions,function(e,i){return s("div",{key:i,staticClass:"van-actionsheet__item",class:{active:i===t.timer.activeIndex},attrs:{"data-time":e.time},on:{click:function(e){return e.stopPropagation(),t.onSelect(e,i)}}},[t._v(t._s(e.name))])})],2)],1)},a=[],n=(i("e7e5"),i("d399")),o=i("cebc"),r=(i("68ef"),i("4d75"),i("8c8e"),i("c31d")),c=i("2638"),l=i.n(c),u=i("a142"),h=i("ba31"),d=i("6605"),v=i("ad06"),f=i("543e"),m=Object(u["g"])("popup"),p=m[0],g=m[1],b=p({mixins:[d["a"]],props:{position:String,transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},render:function(t){var e,i=this;if(this.shouldRender){var s=this.position,a=function(t){return function(){return i.$emit(t)}},n=this.transition||(s?"van-popup-slide-"+s:"van-fade");return t("transition",{attrs:{name:n},on:{afterEnter:a("opened"),afterLeave:a("closed")}},[t("div",{directives:[{name:"show",value:this.value}],class:g((e={},e[s]=s,e))},[this.slots()])])}}}),C=Object(u["g"])("actionsheet"),y=C[0],w=C[1];function k(t,e,i,s){var a=e.title,n=e.cancelText,o=function(){Object(h["a"])(s,"input",!1),Object(h["a"])(s,"cancel")},r=function(){return t("div",{class:[w("header"),"van-hairline--top-bottom"]},[a,t(v["a"],{attrs:{name:"close"},class:w("close"),on:{click:o}})])},c=function(e,i){return t("div",{class:[w("item",{disabled:e.disabled||e.loading}),e.className,"van-hairline--top"],on:{click:function(t){t.stopPropagation(),e.disabled||e.loading||(e.callback&&e.callback(e),Object(h["a"])(s,"select",e,i))}}},[e.loading?t(f["a"],{class:w("loading"),attrs:{size:"20px"}}):[t("span",{class:w("name")},[e.name]),e.subname&&t("span",{class:w("subname")},[e.subname])]])};return t(b,l()([{class:w({"safe-area-inset-bottom":e.safeAreaInsetBottom}),attrs:{value:e.value,position:"bottom",overlay:e.overlay,lazyRender:e.lazyRender,getContainer:e.getContainer,closeOnClickOverlay:e.closeOnClickOverlay},on:{input:function(t){Object(h["a"])(s,"input",t)}}},Object(h["b"])(s)]),[a?r():e.actions.map(c),i["default"]&&t("div",{class:w("content")},[i["default"]()]),n&&t("div",{class:w("cancel"),on:{click:o}},[n])])}k.props=Object(r["a"])({},d["a"].props,{title:String,actions:Array,cancelText:String,safeAreaInsetBottom:Boolean,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}});var T=y(k),_=(i("9617"),i("3875")),x=i("db78"),S=Object(u["g"])("slider"),P=S[0],O=S[1],$=P({mixins:[_["a"]],props:{min:Number,value:Number,disabled:Boolean,vertical:Boolean,activeColor:String,inactiveColor:String,max:{type:Number,default:100},step:{type:Number,default:1},barHeight:{type:String,default:"2px"}},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.startValue=this.format(this.value))},onTouchMove:function(t){if(Object(x["c"])(t,!0),!this.disabled){this.touchMove(t);var e=this.$el.getBoundingClientRect(),i=this.vertical?this.deltaY:this.deltaX,s=this.vertical?e.height:e.width,a=i/s*100;this.newValue=this.startValue+a,this.updateValue(this.newValue)}},onTouchEnd:function(){this.disabled||this.updateValue(this.newValue,!0)},onClick:function(t){if(t.stopPropagation(),!this.disabled){var e=this.$el.getBoundingClientRect(),i=this.vertical?t.clientY-e.top:t.clientX-e.left,s=this.vertical?e.height:e.width,a=i/s*100;this.updateValue(a,!0)}},updateValue:function(t,e){t=this.format(t),this.$emit("input",t),e&&this.$emit("change",t)},format:function(t){return Math.round(Math.max(this.min,Math.min(t,this.max))/this.step)*this.step}},render:function(t){var e,i=this.vertical,s={background:this.inactiveColor},a=i?"height":"width",n=i?"width":"height",o=(e={},e[a]=this.format(this.value)+"%",e[n]=this.barHeight,e.background=this.activeColor,e);return t("div",{style:s,class:O({disabled:this.disabled,vertical:i}),on:{click:this.onClick}},[t("div",{class:O("bar"),style:o},[t("div",{class:O("button-wrapper"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots("button")||t("div",{class:O("button")})])])])}}),B=i("c1df"),j=i.n(B),R=i("2b0e"),E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"progress"},[i("div",{ref:"progressBar",staticClass:"progress-bar",on:{click:t.progressClick}},[i("div",{ref:"line",staticClass:"line"},[i("div",{ref:"progressPoint",staticClass:"point",on:{touchstart:function(e){return e.preventDefault(),t.progressTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.progressTouchMove(e)},touchend:t.progressTouchEnd}})])]),i("div",{staticClass:"time"},[i("div",{staticClass:"current"},[t._v(t._s(t.currentTime))]),i("div",{staticClass:"total"},[t._v(t._s(t.durationTime))])])])},M=[],I=i("2d08"),V=(Object(I["b"])("transform"),{props:["progress","currentTime","durationTime"],watch:{progress:function(t){if(t>=0&&!this.touch.initiated){var e=this.$refs.progressBar.clientWidth,i=t/100*e;this._offset(i)}}},methods:{progressTouchStart:function(t){this.touch.initiated=!0,this.touch.startX=t.touches[0].pageX,this.touch.left=this.$refs.line.clientWidth},progressTouchMove:function(t){if(this.touch.initiated){var e=t.touches[0].pageX-this.touch.startX,i=Math.min(this.$refs.progressBar.clientWidth,Math.max(0,this.touch.left+e));this._offset(i),this.$emit("percentChanging",this._getPercent())}},progressTouchEnd:function(){this.touch.initiated=!1,this._triggerPercent()},progressClick:function(t){var e=this.$refs.progressBar.getBoundingClientRect(),i=t.pageX-e.left;this._offset(i),this._triggerPercent()},_triggerPercent:function(){var t=this.$refs.progressBar.clientWidth,e=this.$refs.line.clientWidth/t;this.$emit("percentChange",e)},_offset:function(t){this.$refs.line.dataset.progress=t,this.$refs.line.style.width="".concat(t,"px")},_getPercent:function(){var t=this.$refs.progressBar.clientWidth;return this.$refs.line.clientWidth/t}},created:function(){this.touch={}}}),W=V,L=(i("ff27"),i("2877")),X=Object(L["a"])(W,E,M,!1,null,"69c7b468",null),Y=X.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"playlist-mask"}),i("div",{staticClass:"playlist"},[i("div",{staticClass:"list-header"},[i("div",{staticClass:"mode"},[i("i",{staticClass:"iconfont",class:t.mode.class}),i("span",{staticClass:"text"},[t._v(t._s(t.mode.text+"("+t.player.playlist.length+"集)"))])])]),i("ul",{staticClass:"list"},t._l(t.player.playlist,function(e,s){return i("li",{key:e.id,staticClass:"show",class:{current:t.player.show.id===e.id},attrs:{"data-id":e.id},on:{click:function(e){return t.play(s)}}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),i("div",{staticClass:"meta"},[i("span",{staticClass:"album"},[t._v(t._s(e.album))]),i("span",{staticClass:"partition"},[t._v("|")]),i("span",{staticClass:"category"},[t._v(t._s(e.category))])])])}),0),i("div",{staticClass:"close",on:{click:t.hide}},[t._v("关闭")])])])},H=[],A=i("b21a"),N=i("2f62"),z={data:function(){return{}},methods:{hide:function(){this.$store.commit("HIDEPLAYLIST")},play:function(t){this.$store.dispatch("play",{index:t})}},computed:Object(o["a"])({mode:function(){var t=this.player.mode;return t===A["a"].sequence?{text:"顺序播放",class:"icon-cycle"}:t===A["a"].random?{text:"随机播放",class:"icon-random"}:{text:"单曲循环",class:"icon-single-cycle"}}},Object(N["c"])(["playBtnClass","player"]))},q=z,F=(i("0afd"),Object(L["a"])(q,D,H,!1,null,"247d075c",null)),J=F.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"playback-rate",class:{active:t.isplaybackRateShow}},[i("div",{staticClass:"rate-mask"}),i("div",{staticClass:"rate"},[i("div",{staticClass:"header"},[t._v("语速调整")]),i("div",{ref:"line",staticClass:"ratebar"},[i("div",{staticClass:"key"}),i("div",{staticClass:"key"}),i("div",{staticClass:"key"}),i("div",{staticClass:"key"}),i("div",{ref:"point",staticClass:"point",attrs:{"data-ratio":t.ratioText},on:{touchstart:function(e){return e.preventDefault(),t.progressTouchStart(e)},touchmove:function(e){return e.preventDefault(),t.progressTouchMove(e)},touchend:t.progressTouchEnd}})]),i("div",{staticClass:"close",on:{click:t.hidePlaybackRate}},[t._v("确定")])])])},G=[];i("ed50");R["a"].use(n["a"]);var K={data:function(){return{ratio:"1.0"}},props:["isplaybackRateShow"],methods:{hidePlaybackRate:function(){this.$emit("hidePlaybackRate")},play:function(t){},progressTouchStart:function(t){this.touch.initiated=!0,this.touch.startX=t.touches[0].pageX,this.touch.lineWidth=this.$refs.line.clientWidth},progressTouchMove:function(t){if(this.touch.initiated){var e=t.touches[0].pageX-25;e<0||e>this.touch.lineWidth||this._offset(e)}},progressTouchEnd:function(){this.touch.initiated=!1,this.$store.dispatch("setPlaybackRate",this.ratio),Object(n["a"])("播放速率调整为".concat(this.ratio,"x"))},_offset:function(t){this.ratio=(t/this.touch.lineWidth*1.5+.5).toFixed(2),this.$refs.point.style.left="".concat(t-5,"px")}},computed:{ratioText:function(){return String(this.ratio).padEnd(4,"0")}},created:function(){this.touch={}}},Q=K,Z=(i("1773"),Object(L["a"])(Q,U,G,!1,null,"5352a69e",null)),tt=Z.exports;R["a"].use($),R["a"].use(T);var et={data:function(){return{volume:{show:!1,value:1,touch:{}},isplaybackRateShow:!1,timer:{timer:null,show:!1,activeIndex:-1,remaining:-1,actions:[{name:"播放完当前节目",time:-1},{name:"15分钟",time:15},{name:"30分钟",time:30},{name:"60分钟",time:60},{name:"90分钟",time:90}]}}},props:{},methods:Object(o["a"])({showPlaylist:function(){this.$store.commit("SHOWPLAYLIST")},hidePlaylist:function(){this.$store.commit("HIDEPLAYLIST")},showlaybackRate:function(){this.isplaybackRateShow=!0},hidePlaybackRate:function(){this.isplaybackRateShow=!1},showTimer:function(){this.timer.show=!0},hideTimer:function(){this.timer.show=!1},addStopPlayTimer:function(t){var e=this,i=-1;window.clearTimeout(this.timer.timer),window.clearInterval(i),t>0?(e.timer.remaining=t,i=window.setInterval(function(){e.timer.remaining<0&&window.clearInterval(i),e.timer.remaining--},1e3),this.timer.timer=window.setTimeout(function(){e.timer.activeIndex=-1,e.pause()},1e3*t),Object(n["a"])("将在".concat(Math.ceil(t/60),"分钟后自动停止播放"))):0===t&&Object(n["a"])("定时器已取消")},onSelect:function(t,e){console.log(t.target.dataset.time,e);var i=60*t.target.dataset.time;i<0&&(i=this.player.duration-this.player.current),this.timer.activeIndex=e,this.addStopPlayTimer(i),this.timer.show=!1},onProgressBarChanging:function(t){},onProgressBarChange:function(t){var e=this.player.duration*t;this.setProgress(e),this.player.playing||this.toggle()},volumeTouchStart:function(t){this.volume.touch.initiated=!0,this.volume.touch.startY=this.volume.touch.startY||t.touches[0].pageY,this.volume.touch.height=this.$refs.volumeBar.clientHeight},volumeTouchMove:function(t){if(this.volume.touch.initiated){var e=this.volume.touch.startY+this.volume.touch.height-t.touches[0].pageY;e<0||e>this.volume.touch.height||this._offsetVolume(e)}},volumeTouchEnd:function(){},_offsetVolume:function(t){var e=t/this.volume.touch.height;this.volume.value=(e>.95?1:e>.15?e:0).toFixed(2),this.$refs.volumeLine.style.height="".concat(t,"px"),this.$store.dispatch("setVolume",""+this.volume.value)},toggleVolumeBar:function(){this.volume.show=!this.volume.show},formatTime:function(t){return j.a.utc(1e3*t).format("HH:mm:ss")}},Object(N["b"])(["backward","prev","toggle","pause","next","forward","getCurrentTime","getDuration","setProgress"])),computed:Object(o["a"])({soundBtnClass:function(){return this.volume.value<=0?"icon-sound-mute":this.volume.value>=.7?"icon-sound":"icon-sound-half"},isPlaylistShow:function(){return this.$store.state.player.isPlaylistShow}},Object(N["c"])(["playBtnClass","player","currentTime","durationTime","progress"])),components:{ProgressBar:Y,Playlist:J,PlaybackRate:tt}},it=et,st=(i("1149"),Object(L["a"])(it,s,a,!1,null,null,null));e["default"]=st.exports},bc46:function(t,e,i){},ed50:function(t,e,i){"use strict";var s=i("5ca1"),a=i("2e08"),n=i("a25f"),o=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(n);s(s.P+s.F*o,"String",{padEnd:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},ff27:function(t,e,i){"use strict";var s=i("3ea7"),a=i.n(s);a.a}}]);
//# sourceMappingURL=radio.71fcc652.js.map